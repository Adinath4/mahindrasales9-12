sap.ui.define(["sap/m/MessageToast","sap/m/Dialog","sap/m/Button","sap/m/Text","sap/m/MessageBox","sap/ui/model/json/JSONModel"],function(e,t,n,s,o,a){"use strict";return{SendQuotation:async function(s){debugger;const o=this._view;const a=o.getContent()[0];const i=a.getAggregation("footer");var r=this._view.byId("sales::PurchaseEnquiryObjectPage--fe::CustomSubSection::Comments--_IDGenTextArea");var u=new t({title:"Confirmation",type:"Message",content:new sap.m.Label({text:"Do you want to send Quoataion?\nBefore sending, Please Confirm"}),beginButton:new n({text:"Confirm",press:async function(){u.close();var a="";const c=o.getContent()[0].mAggregations.sections[5].mForwardedAggregations.subSections[0].mAggregations._grid.mAggregations.content[0].mAggregations.content.mAggregations.items[1];const g=c.getValue();const l=/^[^a-zA-Z0-9]+$/;if(!g){a="Comment is empty. Please enter a Comment."}if(l.test(g)){a="Only special characters are not allowed in the comment."}if(a){var m=new t({title:"Error",type:"Message",state:"Error",content:new sap.m.Label({text:a}),beginButton:new n({text:"OK",press:function(){m.close()}}),afterClose:function(){m.destroy()}});m.open()}else{const t=window.location.href;const n=/purchaseEnquiryUuid=([a-f0-9\-]+)/;const a=t.match(n);let u;if(a&&a[1]){u=a[1]}else{console.log("UUID not found");e.show("Purchase Enquiry UUID not found.");return}let c="commentsFun";let l=s.getModel().bindContext(`/${c}(...)`);l.setParameter("commentsText",g).setParameter("peUuid",u);await l.execute();debugger;let m="quotationFun";let d=s.getModel().bindContext(`/${m}(...)`);d.setParameter("peUuid",u);await d.execute();const f=d.getBoundContext();const p=f.getValue();e.show("Quotation  Sent Successfully!");setTimeout(function(){debugger;r.setValue("");debugger}.bind(this),800);const b=o.findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Edit")||e.getId().includes("send"))});b[0].setVisible(false);b[1].setVisible(false);i.setVisible(false)}}}),endButton:new n({text:"Cancel",press:function(){u.close()}})});u.open()}}});
//# sourceMappingURL=SendQuotation.js.map