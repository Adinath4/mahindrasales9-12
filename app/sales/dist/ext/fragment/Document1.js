sap.ui.define(["sap/m/MessageToast","jquery.sap.global"],function(e){"use strict";return{onAfterItemAdded:async function(t){debugger;const o=t.oSource.getModel().getServiceUrl();const s=/PurchaseEnquiry\([^)]*\)/;const r=window.location.href.match(s);const i=r?r[0]:"";const n=t.getParameter("item");const c=i.split("=")[1].split(",")[0].trim();const l={IsActiveEntity:true,mediaType:n.getMediaType(),fileName:n.getFileName(),size:n.getFileObject().size,purchaseEnquiryUuid:c};debugger;const a=o+i;const u=a.replace(/\/PurchaseEnquiry\([^)]+\)/,"/Files");console.log(u);const d={url:u,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(l)};try{const e=await new Promise((e,t)=>{$.ajax(d).done(o=>{if(o&&o.id){e(o.id)}else{t("ID not found in the response")}}).fail(e=>{t(e)})});const t=`${o}Files(ID=${e},IsActiveEntity=true)/content`;n.setUploadUrl(t);n.setUrl(t);const s=this.byId("uploadSet");s.setHttpRequestMethod("PUT");s.uploadItem(n)}catch(t){console.error(t);e.show("Error during file upload.")}},onUploadCompleted:function(t){debugger;const o=this.byId("uploadSet");o.removeAllIncompleteItems();e.show("All uploads completed successfully.")},onOpenPressed:function(e){debugger;var t;var o=e.oSource.getModel().getServiceUrl();var s=e.oSource.mProperties.url;if(!s.startsWith(o)){s=o+s.substring(1);e.oSource.mProperties.url=s}},onAfterItemRemoved:function(t){debugger;const o=t.oSource.getModel().getServiceUrl();const s=/^(.*?),IsActiveEntity=/;const r=t.mParameters.item.mProperties.url.match(s);if(r){let t=r[1]+",IsActiveEntity=false)";t=t.replace(/^.*\/Files/,"/Files");$.ajax({url:o+t,method:"DELETE"}).done(()=>{e.show("File removed successfully.")}).fail(()=>{e.show("Error removing file.")})}}}});
//# sourceMappingURL=Document1.js.map