sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";var t;var a=this;var r;var o;return{onAfterItemAdded:function(e){debugger;var a=e.oSource.getModel().getServiceUrl();var o=e.getParameter("item");var n=window.location.href;const i=/purchaseEnquiryUuid=([a-fA-F0-9-]+)/;const c=n.match(i);if(c){r=c[1];console.log(r)}else{console.log("Number not found in URL")}var s=async function(e){var o={mediaType:e.getMediaType(),fileName:e.getFileName(),size:e.getFileObject().size,purchaseEnquiryUuid:r};debugger;var n={url:a+`PurchaseEnquiry(purchaseEnquiryUuid=${r},IsActiveEntity=true)/enquiryToFile`,method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify(o)};await new Promise((e,a)=>{debugger;$.ajax(n).done((a,r,o)=>{debugger;t=a.id;e(a)}).fail(e=>{a(e)})})};s(o).then(e=>{debugger;var r=a+`EnquiryFiles(id=${t},IsActiveEntity=false)/content`;t=null;o.setUploadUrl(r);o.setUrl(r);var n=this.byId("_IDGenUploadSet");n.setHttpRequestMethod("PUT");n.uploadItem(o)}).catch(e=>{console.log(e)})},onOpenPressed:async function(e){debugger;var t;var a=e.oSource.getModel().getServiceUrl();var r=e.oSource.mProperties.url;if(!r.startsWith(a)){r=a+r;e.oSource.mProperties.url=r}this.showSideContent("GeneratedFacet1")},onUploadCompleted:function(e){debugger;var t=this.byId("upload");t.removeAllIncompleteItems()},afterItemRemoved:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();debugger;const a=/^(.*?),IsActiveEntity=/;let r=e.mParameters.item.mProperties.url.match(a);let o=r[1]+",IsActiveEntity=false)";$.ajax({url:t+o,method:"DELETE"})},formatThumbnailUrl:function(e){debugger;var t;switch(e){case"image/png":t="sap-icon://card";break;case"text/plain":t="sap-icon://document-text";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":t="sap-icon://excel-attachment";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":t="sap-icon://doc-attachment";break;case"application/pdf":t="sap-icon://pdf-attachment";break;default:t="sap-icon://attachment"}return t}}});
//# sourceMappingURL=Documents.js.map